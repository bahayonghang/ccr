# ğŸ¦€ CCR é¡¹ç›® Justfile - å¿«é€Ÿæ‰§è¡Œå¸¸ç”¨å‘½ä»¤

# ğŸ“– ä½¿ç”¨æŒ‡å—
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# æŸ¥çœ‹å‘½ä»¤ï¼šjust --list æˆ– just help
# å¿«é€Ÿå¼€å‘ï¼šjust dev (æ£€æŸ¥+æµ‹è¯•) æˆ– just watch (è‡ªåŠ¨é‡ç¼–è¯‘)
# ä»£ç æ£€æŸ¥ï¼šjust lint (æ ¼å¼+Clippy) æˆ– just ci (å®Œæ•´CI)
# æ„å»ºç¨‹åºï¼šjust build (Debug) æˆ– just release (ä¼˜åŒ–ç‰ˆ)
# è¿è¡Œç¨‹åºï¼šjust run -- <å‚æ•°> æˆ– just run-release -- <å‚æ•°>
# æœ¬åœ°å®‰è£…ï¼šjust install (å®‰è£…åˆ° ~/.cargo/bin)
# å‰ç½®è¦æ±‚ï¼šRustå·¥å…·é“¾ (cargo, rustc)
# æç¤ºäº‹é¡¹ï¼šä¿®æ”¹äºŒè¿›åˆ¶åéœ€åŒæ­¥æ›´æ–° BIN å˜é‡

# äºŒè¿›åˆ¶åç§°(ä¸ Cargo.toml [[bin]] ä¿æŒä¸€è‡´)
BIN := "ccr"

# ğŸ§­ è·¨å¹³å° Shell é…ç½®
# Windows ä½¿ç”¨ PowerShell with UTF-8 encoding
set windows-shell := ["pwsh.exe", "-NoLogo", "-NoProfile", "-Command", "$OutputEncoding = [Console]::OutputEncoding = [System.Text.Encoding]::UTF8;"]

# Unix-like ç³»ç»Ÿä½¿ç”¨ bash
set shell := ["bash", "-cu"]

# ğŸ¯ é»˜è®¤ä»»åŠ¡ï¼šæ˜¾ç¤ºå¸®åŠ©èœå•
default: help

# ğŸ“‹ æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨ä»»åŠ¡
help:
  @echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
  @echo "â•‘   ğŸ¦€ CCR Justfile - å¯ç”¨å‘½ä»¤åˆ—è¡¨                              â•‘"
  @echo "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
  @echo "â•‘   ğŸ’¡ æç¤º: just <å‘½ä»¤> æ‰§è¡Œï¼Œjust --list æŸ¥çœ‹å®Œæ•´åˆ—è¡¨           â•‘"
  @echo "â•‘                                                                â•‘"
  @echo "â•‘   ğŸ”§ ç‰ˆæœ¬ç›¸å…³å‘½ä»¤ï¼ˆè·¨å¹³å°ï¼‰ï¼š                                  â•‘"
  @echo "â•‘     â€¢ just version-sync   åŒæ­¥ç‰ˆæœ¬å·ï¼ˆä»¥æ ¹ Cargo.toml ä¸ºä¸»ï¼‰    â•‘"
  @echo "â•‘                            â†’ æ›´æ–° ccr-ui/backend/Cargo.toml    â•‘"
  @echo "â•‘                              å’Œ ccr-ui/frontend/package.json    â•‘"
  @echo "â•‘                              å’Œ ccr-ui/frontend/src-tauri/*     â•‘"
  @echo "â•‘                            â†’ Windows: ä½¿ç”¨ version-sync.ps1    â•‘"
  @echo "â•‘                            â†’ Linux/macOS: ä½¿ç”¨ version-sync.sh â•‘"
  @echo "â•‘     â€¢ just version-check  ä»…æ£€æŸ¥ç‰ˆæœ¬ä¸€è‡´æ€§ï¼ˆä¸ä¿®æ”¹æ–‡ä»¶ï¼‰        â•‘"
  @echo "â•‘                                                                â•‘"
  @echo "â•‘   ğŸŒ å‰ç«¯æ£€æŸ¥å‘½ä»¤ï¼š                                            â•‘"
  @echo "â•‘     â€¢ just frontend-typecheck  å‰ç«¯ TypeScript ç±»å‹æ£€æŸ¥        â•‘"
  @echo "â•‘     â€¢ just docs-check          æ–‡æ¡£æ„å»ºæ£€æŸ¥ (VitePress)        â•‘"
  @echo "â•‘     â€¢ just frontend-check      å‰ç«¯å®Œæ•´æ£€æŸ¥ï¼ˆç±»å‹+æ–‡æ¡£ï¼‰       â•‘"
  @echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
  @echo ""
  @just --list

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ—ï¸  æ„å»ºå‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ğŸ”¨ è°ƒè¯•æ„å»º (Debug æ¨¡å¼)
build:
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ”¨ å¼€å§‹è°ƒè¯•æ„å»º"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ“Œ æ¨¡å¼: Debug (åŒ…å«è°ƒè¯•ç¬¦å·)"
  @echo ""
  cargo build
  @echo ""
  @echo "âœ… æ„å»ºå®Œæˆ â†’ target/debug/{{BIN}}"

# âš¡ å‘å¸ƒæ„å»º (Release ä¼˜åŒ–)
release:
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "âš¡ å¼€å§‹å‘å¸ƒæ„å»º"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ“Œ æ¨¡å¼: Release (LTOä¼˜åŒ– + ç¬¦å·å‰¥ç¦»)"
  @echo ""
  cargo build --release
  @echo ""
  @echo "âœ… æ„å»ºå®Œæˆ â†’ target/release/{{BIN}}"

# ğŸ” å¿«é€Ÿç±»å‹æ£€æŸ¥ (ä¸ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶)
check:
  @echo "ğŸ” è¿è¡Œç±»å‹æ£€æŸ¥..."
  @echo "ğŸ’¡ å¿«é€ŸéªŒè¯æ¨¡å¼ (ä¸ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶)"
  @echo ""
  cargo check
  @echo ""
  @echo "âœ… ç±»å‹æ£€æŸ¥é€šè¿‡"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# â–¶ï¸  è¿è¡Œå‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â–¶ï¸ è¿è¡Œç¨‹åº (Debugç‰ˆæœ¬) - ç¤ºä¾‹: just run -- --help
run *args:
  @echo "â–¶ï¸ è¿è¡Œ Debug ç‰ˆæœ¬"
  @echo "ğŸ“ å‚æ•°: {{args}}"
  @echo ""
  cargo run -- {{args}}

# ğŸš€ è¿è¡Œç¨‹åº (Releaseç‰ˆæœ¬)
run-release *args:
  @echo "ğŸš€ è¿è¡Œ Release ç‰ˆæœ¬"
  @echo "ğŸ“ å‚æ•°: {{args}}"
  @echo ""
  cargo run --release -- {{args}}

# ğŸ·ï¸ æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
version:
  @echo "ğŸ·ï¸ è·å–ç‰ˆæœ¬ä¿¡æ¯"
  @echo ""
  @cargo run -- --version

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âœ… æµ‹è¯•å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# âœ… è¿è¡Œæµ‹è¯• (æ ‡å‡†æ¨¡å¼)
test:
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "âœ… è¿è¡Œæµ‹è¯•å¥—ä»¶"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ“Š æ¨¡å¼: æ ‡å‡†æµ‹è¯•"
  @echo "âš ï¸  æ³¨æ„: platform_integration_tests ä½¿ç”¨ä¸²è¡Œæ¨¡å¼ (--test-threads=1)"
  @echo ""
  # é¦–å…ˆè¿è¡Œéœ€è¦ä¸²è¡Œæ‰§è¡Œçš„ platform_integration_tests (ä¿®æ”¹å…¨å±€ç¯å¢ƒå˜é‡)
  cargo test --test platform_integration_tests -- --test-threads=1
  # ç„¶åè¿è¡Œå…¶ä»–æµ‹è¯• (å¯ä»¥å¹¶è¡Œ)
  cargo test --lib
  cargo test --test integration_test
  cargo test --test manager_tests
  @echo ""
  @echo "âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡"

# ğŸ§ª è¿è¡Œæ‰€æœ‰æµ‹è¯• (åŒ…æ‹¬å¿½ç•¥çš„æµ‹è¯•)
test-all:
  @echo "ğŸ§ª è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶"
  @echo "ğŸ“Š æ¨¡å¼: åŒ…å«è¢«å¿½ç•¥çš„æµ‹è¯•"
  @echo "âš ï¸  æ³¨æ„: platform_integration_tests ä½¿ç”¨ä¸²è¡Œæ¨¡å¼ (--test-threads=1)"
  @echo ""
  # é¦–å…ˆè¿è¡Œéœ€è¦ä¸²è¡Œæ‰§è¡Œçš„ platform_integration_tests
  cargo test --test platform_integration_tests -- --test-threads=1 --include-ignored
  # ç„¶åè¿è¡Œå…¶ä»–æµ‹è¯•
  cargo test --lib -- --include-ignored
  cargo test --test integration_test -- --include-ignored
  cargo test --test manager_tests -- --include-ignored
  @echo ""
  @echo "âœ… å®Œæ•´æµ‹è¯•é€šè¿‡"

# ğŸ“Š è¿è¡ŒåŸºå‡†æµ‹è¯•
bench:
  @echo "ğŸ“Š è¿è¡ŒåŸºå‡†æµ‹è¯•"
  @echo ""
  cargo bench
  @echo ""
  @echo "âœ… åŸºå‡†æµ‹è¯•å®Œæˆ"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âœ¨ ä»£ç è´¨é‡å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# âœ¨ ä»£ç æ ¼å¼åŒ–
fmt:
  @echo "âœ¨ æ ¼å¼åŒ–ä»£ç "
  @echo ""
  cargo fmt
  @echo ""
  @echo "âœ… ä»£ç æ ¼å¼åŒ–å®Œæˆ"

# ğŸ” æ£€æŸ¥ä»£ç æ ¼å¼ (ä¸ä¿®æ”¹æ–‡ä»¶)
fmt-check:
  @echo "ğŸ” æ£€æŸ¥ä»£ç æ ¼å¼"
  @echo "ğŸ“Œ æ¨¡å¼: ä»…éªŒè¯ï¼Œä¸ä¿®æ”¹æ–‡ä»¶"
  @echo ""
  cargo fmt -- --check
  @echo ""
  @echo "âœ… ä»£ç æ ¼å¼ç¬¦åˆè§„èŒƒ"

# ğŸš¨ é™æ€æ£€æŸ¥ (Clippy) - è­¦å‘Šè§†ä¸ºé”™è¯¯
clippy:
  @echo "ğŸš¨ è¿è¡Œ Clippy é™æ€æ£€æŸ¥"
  @echo "âš ï¸  æ¨¡å¼: æ‰€æœ‰è­¦å‘Šè§†ä¸ºé”™è¯¯"
  @echo ""
  cargo clippy -- -D warnings
  @echo ""
  @echo "âœ… Clippy æ£€æŸ¥é€šè¿‡"

# ğŸ”§ å®Œæ•´ä»£ç æ£€æŸ¥ (æ ¼å¼åŒ– + Clippy)
lint: fmt clippy
  @echo ""
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "âœ… ä»£ç è´¨é‡æ£€æŸ¥å…¨éƒ¨é€šè¿‡"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ å¼€å‘å·¥ä½œæµå‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# âš¡ å¿«é€Ÿå¼€å‘å¾ªç¯ (æ£€æŸ¥ â†’ æµ‹è¯•)
dev: check test
  @echo ""
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "âœ… å¼€å‘éªŒè¯å®Œæˆ"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# ğŸ‘€ ç›‘æ§æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘
watch:
  @echo "ğŸ‘€ å¯åŠ¨æ–‡ä»¶ç›‘æ§æ¨¡å¼"
  @echo "ğŸ“Œ ä½¿ç”¨ cargo-watch (éœ€è¦å®‰è£…: cargo install cargo-watch)"
  @echo ""
  cargo watch -x check -x test

# ğŸ¯ å®Œæ•´ CI æµç¨‹ (ç‰ˆæœ¬åŒæ­¥ + æ ¼å¼æ£€æŸ¥ + Clippy + æµ‹è¯• + æ„å»º + å‰ç«¯ç±»å‹æ£€æŸ¥)
ci: version-sync fmt-check clippy test release frontend-typecheck
  @echo ""
  @echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
  @echo "â•‘          ğŸ‰ CI æµç¨‹å…¨éƒ¨é€šè¿‡ - ä»£ç è´¨é‡ä¼˜ç§€ï¼               â•‘"
  @echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸŒ å‰ç«¯æ£€æŸ¥å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ğŸ” å‰ç«¯ TypeScript ç±»å‹æ£€æŸ¥
frontend-typecheck:
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ” å‰ç«¯ TypeScript ç±»å‹æ£€æŸ¥"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  cd ccr-ui/frontend && npm install --silent && npm run type-check
  @echo "âœ… å‰ç«¯ç±»å‹æ£€æŸ¥é€šè¿‡"

# ğŸ“š æ–‡æ¡£æ„å»ºæ£€æŸ¥ (VitePress) - å¯é€‰ï¼Œæœ‰ dead links æ—¶å¯èƒ½å¤±è´¥
docs-check:
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ“š æ–‡æ¡£æ„å»ºæ£€æŸ¥"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "âš ï¸  æ³¨æ„: è‹¥æœ‰ dead links ä¼šå¤±è´¥ï¼Œå¯åœ¨ .vitepress/config ä¸­é…ç½® ignoreDeadLinks"
  cd docs && npm install --silent && npm run build
  cd ccr-ui/docs && npm install --silent && npm run build
  @echo "âœ… æ–‡æ¡£æ„å»ºæ£€æŸ¥é€šè¿‡"

# ğŸŒ å‰ç«¯å®Œæ•´æ£€æŸ¥ (ç±»å‹æ£€æŸ¥ + æ–‡æ¡£æ„å»º)
frontend-check: frontend-typecheck docs-check
  @echo ""
  @echo "âœ… å‰ç«¯æ£€æŸ¥å…¨éƒ¨é€šè¿‡"

# ğŸŒ å‰ç«¯å¿«é€Ÿæ£€æŸ¥ (ä»…ç±»å‹æ£€æŸ¥ï¼Œä¸å«æ–‡æ¡£)
frontend-check-quick: frontend-typecheck
  @echo ""
  @echo "âœ… å‰ç«¯å¿«é€Ÿæ£€æŸ¥é€šè¿‡"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“¦ å®‰è£…ä¸ç®¡ç†å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ğŸ“¦ å®‰è£…åˆ°æœ¬åœ° (~/.cargo/bin)
install:
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ“¦ å®‰è£…åˆ°æœ¬åœ°"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ“ ç›®æ ‡è·¯å¾„: ~/.cargo/bin/{{BIN}}"
  @echo "ğŸ”’ æ¨¡å¼: é”å®šä¾èµ–ç‰ˆæœ¬ (--locked)"
  @echo ""
  cargo install --path . --locked
  @echo ""
  @echo "âœ… å®‰è£…å®Œæˆ"

# â™»ï¸ å¼ºåˆ¶é‡æ–°å®‰è£…
reinstall:
  @echo "â™»ï¸ å¼ºåˆ¶é‡æ–°å®‰è£…"
  @echo "âš ï¸  æ¨¡å¼: è¦†ç›–ç°æœ‰å®‰è£…"
  @echo ""
  cargo install --path . --locked --force
  @echo ""
  @echo "âœ… é‡æ–°å®‰è£…å®Œæˆ"

# ğŸ—‘ï¸ å¸è½½å·²å®‰è£…çš„äºŒè¿›åˆ¶
uninstall:
  @echo "ğŸ—‘ï¸ å¸è½½ {{BIN}}"
  @echo ""
  cargo uninstall {{BIN}}
  @echo ""
  @echo "âœ… å¸è½½å®Œæˆ"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“š æ–‡æ¡£å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ğŸ“š æ„å»ºæ–‡æ¡£ (ä¸åŒ…å«ä¾èµ–)
doc:
  @echo "ğŸ“š ç”Ÿæˆæ–‡æ¡£"
  @echo "ğŸ“Œ æ¨¡å¼: ä»…æœ¬é¡¹ç›®ä»£ç  (--no-deps)"
  @echo ""
  cargo doc --no-deps
  @echo ""
  @echo "âœ… æ–‡æ¡£ç”Ÿæˆå®Œæˆ"

# ğŸŒ æ„å»ºå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ–‡æ¡£
doc-open:
  @echo "ğŸŒ ç”Ÿæˆå¹¶æ‰“å¼€æ–‡æ¡£"
  @echo "ğŸ“– å°†åœ¨é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€"
  @echo ""
  cargo doc --no-deps --open

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§¹ æ¸…ç†ä¸ç»´æŠ¤å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# ğŸ§¹ æ¸…ç†æ„å»ºäº§ç‰©
clean:
  @echo "ğŸ§¹ æ¸…ç†æ„å»ºäº§ç‰©"
  @echo "ğŸ“‚ æ¸…ç†ç›®æ ‡: target/ ç›®å½•"
  @echo ""
  cargo clean
  @echo ""
  @echo "âœ… æ¸…ç†å®Œæˆ"

# ğŸ“¦ æ£€æŸ¥ä¾èµ–æ›´æ–°
update-deps:
  @echo "ğŸ“¦ æ£€æŸ¥ä¾èµ–æ›´æ–°"
  @echo "ğŸ“Œ ä½¿ç”¨ cargo-outdated (éœ€è¦å®‰è£…: cargo install cargo-outdated)"
  @echo ""
  cargo outdated

# ğŸ’£ æ·±åº¦æ¸…ç† (åŒ…æ‹¬ Cargo ç¼“å­˜å’Œç›®æ ‡æ–‡ä»¶)
deep-clean: clean
  @echo ""
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ’£ æ·±åº¦æ¸…ç† - è­¦å‘Šï¼šå°†æ¸…ç† Cargo ç¼“å­˜"
  @echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  @echo "ğŸ—‘ï¸  æ¸…ç† Cargo æ³¨å†Œè¡¨ç¼“å­˜"
  @echo ""
  cargo clean
  @echo ""
  @echo "âœ… æ·±åº¦æ¸…ç†å®Œæˆ"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”§ ç‰ˆæœ¬å·åŒæ­¥å‘½ä»¤
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# åŒæ­¥ç‰ˆæœ¬å·åˆ° UI åç«¯ä¸å‰ç«¯ï¼ˆä»¥æ ¹ Cargo.toml ä¸ºä¸»ï¼‰
version-sync:
  @just _version-sync-{{os()}}

# ä»…æ£€æŸ¥ç‰ˆæœ¬ä¸€è‡´æ€§
version-check:
  @just _version-check-{{os()}}

# åŒæ­¥ç‰ˆæœ¬ - Windows
_version-sync-windows:
  @Write-Output 'ğŸ”§ åŒæ­¥ç‰ˆæœ¬å·ï¼ˆä»¥æ ¹ Cargo.toml ä¸ºä¸»ï¼‰'
  @.\scripts\version-sync.ps1 -Verbose
  @Write-Output 'âœ… ç‰ˆæœ¬åŒæ­¥å®Œæˆ'

# åŒæ­¥ç‰ˆæœ¬ - Linux
_version-sync-linux:
  @echo "ğŸ”§ åŒæ­¥ç‰ˆæœ¬å·ï¼ˆä»¥æ ¹ Cargo.toml ä¸ºä¸»ï¼‰"
  bash scripts/version-sync.sh
  @echo "âœ… ç‰ˆæœ¬åŒæ­¥å®Œæˆ"

# åŒæ­¥ç‰ˆæœ¬ - macOS
_version-sync-macos:
  @echo "ğŸ”§ åŒæ­¥ç‰ˆæœ¬å·ï¼ˆä»¥æ ¹ Cargo.toml ä¸ºä¸»ï¼‰"
  bash scripts/version-sync.sh
  @echo "âœ… ç‰ˆæœ¬åŒæ­¥å®Œæˆ"

# æ£€æŸ¥ç‰ˆæœ¬ - Windows
_version-check-windows:
  @Write-Output 'ğŸ” æ£€æŸ¥ç‰ˆæœ¬å·ä¸€è‡´æ€§'
  @.\scripts\version-sync.ps1 -Check -Verbose

# æ£€æŸ¥ç‰ˆæœ¬ - Linux
_version-check-linux:
  @echo "ğŸ” æ£€æŸ¥ç‰ˆæœ¬å·ä¸€è‡´æ€§"
  bash scripts/version-sync.sh --check --verbose

# æ£€æŸ¥ç‰ˆæœ¬ - macOS
_version-check-macos:
  @echo "ğŸ” æ£€æŸ¥ç‰ˆæœ¬å·ä¸€è‡´æ€§"
  bash scripts/version-sync.sh --check --verbose