/* ============================================
   CCR-UI Nekomata Kawaii Design System
   Animations - Keyframes & Animation Classes
   ============================================ */

/* ========== 基础动画关键帧 ========== */
@layer utilities {
    /* 淡入 */
    @keyframes fade-in {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    /* 淡出 */
    @keyframes fade-out {
        from {
            opacity: 1;
        }

        to {
            opacity: 0;
        }
    }

    /* 向上滑入 */
    @keyframes slide-up {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* 向下滑入 */
    @keyframes slide-down {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* 从左滑入 */
    @keyframes slide-in-left {
        from {
            opacity: 0;
            transform: translateX(-10px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* 从右滑入 */
    @keyframes slide-in-right {
        from {
            opacity: 0;
            transform: translateX(10px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* 缩放入场 */
    @keyframes scale-in {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* 缩放出场 */
    @keyframes scale-out {
        from {
            opacity: 1;
            transform: scale(1);
        }

        to {
            opacity: 0;
            transform: scale(0.95);
        }
    }

    /* ========== Neo-Terminal 特色动画 ========== */

    /* 微妙脉冲 - 用于状态指示器 */
    @keyframes pulse-subtle {
        0%,
        100% {
            opacity: 1;
        }

        50% {
            opacity: 0.6;
        }
    }

    /* 发光脉冲 - 用于重要元素 */
    @keyframes pulse-glow {
        0%,
        100% {
            box-shadow: 0 0 0 0 var(--color-accent-primary-glow);
        }

        50% {
            box-shadow: var(--glow-primary);
        }
    }

    /* 旋转 - 用于加载指示器 */
    @keyframes spin {
        from {
            transform: rotate(0deg);
        }

        to {
            transform: rotate(360deg);
        }
    }

    /* 弹跳 - 用于按钮点击 */
    @keyframes bounce-in {
        0% {
            transform: scale(0.9);
        }

        50% {
            transform: scale(1.02);
        }

        100% {
            transform: scale(1);
        }
    }

    /* 摇晃 - 用于错误提示 */
    @keyframes shake {
        0%,
        100% {
            transform: translateX(0);
        }

        10%,
        30%,
        50%,
        70%,
        90% {
            transform: translateX(-4px);
        }

        20%,
        40%,
        60%,
        80% {
            transform: translateX(4px);
        }
    }

    /* 渐变流动 - 用于品牌元素 */
    @keyframes gradient-shift {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    /* 边框发光 - 用于选中状态 */
    @keyframes border-glow {
        0%,
        100% {
            border-color: var(--color-border-accent);
        }

        50% {
            border-color: var(--color-accent-primary);
        }
    }

    /* 侧边栏项目入场 */
    @keyframes sidebar-item-enter {
        from {
            opacity: 0;
            transform: translateX(-8px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* 卡片入场 */
    @keyframes card-enter {
        from {
            opacity: 0;
            transform: translateY(12px) scale(0.98);
        }

        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    /* 模态框入场 */
    @keyframes modal-enter {
        from {
            opacity: 0;
            transform: scale(0.95) translateY(-10px);
        }

        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }

    /* 模态框出场 */
    @keyframes modal-exit {
        from {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        to {
            opacity: 0;
            transform: scale(0.95) translateY(-10px);
        }
    }

    /* 遮罩层入场 */
    @keyframes backdrop-enter {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    /* ========== 猫娘特色动画 (Neko Kawaii) ========== */

    /* 猫爪按压 - 用于按钮点击反馈 */
    @keyframes neko-press {
        0% {
            transform: scale(1);
        }

        40% {
            transform: scale(0.92);
        }

        70% {
            transform: scale(1.04);
        }

        100% {
            transform: scale(1);
        }
    }

    /* 猫耳抖动 - 用于 hover 装饰效果 */
    @keyframes neko-ear-wiggle {
        0%,
        100% {
            transform: rotate(0deg);
        }

        20% {
            transform: rotate(-8deg);
        }

        40% {
            transform: rotate(6deg);
        }

        60% {
            transform: rotate(-4deg);
        }

        80% {
            transform: rotate(2deg);
        }
    }

    /* 猫尾摇摆 - 用于 loading 状态 */
    @keyframes neko-tail-wag {
        0%,
        100% {
            transform: rotate(-5deg) scaleX(1);
        }

        25% {
            transform: rotate(8deg) scaleX(1.05);
        }

        50% {
            transform: rotate(-3deg) scaleX(1);
        }

        75% {
            transform: rotate(6deg) scaleX(0.95);
        }
    }

    /* 猫爪印出现 - 用于步骤指示 */
    @keyframes paw-appear {
        0% {
            opacity: 0;
            transform: scale(0.3) rotate(-20deg);
        }

        50% {
            opacity: 1;
            transform: scale(1.1) rotate(5deg);
        }

        100% {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }
    }

    /* 浮动猫爪粒子 - 用于背景装饰 */
    @keyframes neko-float {
        0%,
        100% {
            transform: translateY(0) rotate(0deg);
            opacity: 0.6;
        }

        25% {
            transform: translateY(-15px) rotate(5deg);
            opacity: 0.9;
        }

        50% {
            transform: translateY(-8px) rotate(-3deg);
            opacity: 0.7;
        }

        75% {
            transform: translateY(-20px) rotate(3deg);
            opacity: 0.8;
        }
    }

    /* 猫娘呼吸灯 - 用于卡片边框发光 */
    @keyframes neko-breathe {
        0%,
        100% {
            box-shadow: 0 0 8px rgb(244 114 182 / 15%);
        }

        50% {
            box-shadow: 0 0 16px rgb(244 114 182 / 30%);
        }
    }

    /* ========== 动画工具类 ========== */

    /* 基础动画 */
    .animate-fade-in {
        animation: fade-in var(--duration-normal) var(--ease-out) forwards;
        will-change: opacity;
    }

    .animate-fade-out {
        animation: fade-out var(--duration-normal) var(--ease-out) forwards;
        will-change: opacity;
    }

    .animate-slide-up {
        animation: slide-up var(--duration-slow) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-slide-down {
        animation: slide-down var(--duration-slow) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-slide-in-left {
        animation: slide-in-left var(--duration-slow) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-slide-in-right {
        animation: slide-in-right var(--duration-slow) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-scale-in {
        animation: scale-in var(--duration-normal) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-scale-out {
        animation: scale-out var(--duration-normal) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    /* Neo-Terminal 特色动画类 */
    .animate-pulse-subtle {
        animation: pulse-subtle 2s var(--ease-in-out) infinite;
        will-change: opacity;
    }

    .animate-pulse-glow {
        animation: pulse-glow 2s var(--ease-in-out) infinite;
        will-change: box-shadow;
    }

    .animate-spin {
        animation: spin 1s linear infinite;
        will-change: transform;
    }

    .animate-bounce-in {
        animation: bounce-in var(--duration-normal) var(--ease-out-back);
        will-change: transform;
    }

    .animate-shake {
        animation: shake 0.5s var(--ease-in-out);
        will-change: transform;
    }

    .animate-gradient-shift {
        background-size: 200% 200%;
        animation: gradient-shift 3s var(--ease-in-out) infinite;
        will-change: background-position;
    }

    .animate-sidebar-item-enter {
        animation: sidebar-item-enter var(--duration-slow) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-card-enter {
        animation: card-enter var(--duration-slow) var(--ease-out) forwards;
        will-change: transform, opacity;
    }

    .animate-modal-enter {
        animation: modal-enter var(--duration-slow) var(--ease-out-back) forwards;
        will-change: transform, opacity;
    }

    .animate-modal-exit {
        animation: modal-exit var(--duration-normal) var(--ease-in) forwards;
        will-change: transform, opacity;
    }

    .animate-backdrop-enter {
        animation: backdrop-enter var(--duration-normal) var(--ease-out) forwards;
        will-change: opacity;
    }

    /* 猫娘特色动画类 (Neko Kawaii) */
    .animate-neko-press {
        animation: neko-press 0.4s var(--ease-out);
        will-change: transform;
    }

    .animate-neko-ear-wiggle {
        animation: neko-ear-wiggle 0.6s var(--ease-in-out);
        will-change: transform;
    }

    .animate-neko-tail-wag {
        animation: neko-tail-wag 1.2s var(--ease-in-out) infinite;
        will-change: transform;
    }

    .animate-paw-appear {
        animation: paw-appear 0.5s var(--ease-out-back) forwards;
        will-change: transform, opacity;
    }

    .animate-neko-float {
        animation: neko-float 4s var(--ease-in-out) infinite;
        will-change: transform, opacity;
    }

    .animate-neko-breathe {
        animation: neko-breathe 3s var(--ease-in-out) infinite;
        will-change: box-shadow;
    }

    /* 延迟工具类 */
    .animate-delay-75 {
        animation-delay: 75ms;
    }

    .animate-delay-100 {
        animation-delay: 100ms;
    }

    .animate-delay-150 {
        animation-delay: 150ms;
    }

    .animate-delay-200 {
        animation-delay: 200ms;
    }

    .animate-delay-300 {
        animation-delay: 300ms;
    }

    .animate-delay-500 {
        animation-delay: 500ms;
    }

    /* 填充模式 */
    .animate-fill-forwards {
        animation-fill-mode: forwards;
    }

    .animate-fill-both {
        animation-fill-mode: both;
    }

    /* ========== GPU 加速 ========== */
    .gpu-accelerate {
        transform: translateZ(0);
        will-change: transform;
        backface-visibility: hidden;
    }

    /* 悬停时准备动画 */
    .hover-animate {
        transition: transform var(--duration-fast) var(--ease-out),
            box-shadow var(--duration-fast) var(--ease-out);
        will-change: transform, box-shadow;
    }

    .hover-animate:hover {
        transform: translateY(-2px);
    }

    /* 导航悬停动画 */
    .nav-hover-effect {
        transition: transform var(--duration-fast) var(--ease-out),
            color var(--duration-fast) var(--ease-out);
        will-change: transform, color;
    }

    .nav-hover-effect:hover {
        transform: scale(1.05);
    }

    /* ========== Vue Page Transitions ========== */

    /* 页面切换动画 - 丝滑模式 (Silk Smooth) */
    .page-enter-active,
    .page-leave-active {
        transition: opacity var(--duration-normal) var(--ease-out),
            transform var(--duration-normal) var(--ease-out);
        will-change: opacity, transform;
    }

    .page-enter-from {
        opacity: 0;
        transform: translateY(10px);
    }

    .page-leave-to {
        opacity: 0;
        transform: translateY(-10px);
    }

    /* 缩放淡入模式 (Scale Fade) - 可选替代方案 */
    .scale-fade-enter-active,
    .scale-fade-leave-active {
        transition: opacity var(--duration-normal) var(--ease-out),
            transform var(--duration-normal) var(--ease-out);
        will-change: opacity, transform;
    }

    .scale-fade-enter-from {
        opacity: 0;
        transform: scale(0.98);
    }

    .scale-fade-leave-to {
        opacity: 0;
        transform: scale(1.02);
    }

    /* ========== 智能路由过渡动画系统 (Route-Aware Transitions) ========== */

    /* 1. page-fade: 首次加载 / 深层链接 */
    .page-fade-enter-active,
    .page-fade-leave-active {
        transition: opacity var(--duration-normal) var(--ease-out);
        will-change: opacity;
    }

    .page-fade-enter-from {
        opacity: 0;
    }

    .page-fade-leave-to {
        opacity: 0;
    }

    /* 2. page-slide-up: 向下导航（进入子页面） - 内容从下方升起 */
    .page-slide-up-enter-active {
        transition: opacity var(--duration-slow) var(--ease-out),
            transform var(--duration-slow) var(--ease-out);
        will-change: opacity, transform;
    }

    .page-slide-up-leave-active {
        transition: opacity var(--duration-normal) var(--ease-in),
            transform var(--duration-normal) var(--ease-in);
        will-change: opacity, transform;
    }

    .page-slide-up-enter-from {
        opacity: 0;
        transform: translateY(16px);
    }

    .page-slide-up-leave-to {
        opacity: 0;
        transform: translateY(-8px);
    }

    /* 3. page-slide-down: 向上导航（返回上级） - 内容从上方落下 */
    .page-slide-down-enter-active {
        transition: opacity var(--duration-slow) var(--ease-out),
            transform var(--duration-slow) var(--ease-out);
        will-change: opacity, transform;
    }

    .page-slide-down-leave-active {
        transition: opacity var(--duration-normal) var(--ease-in),
            transform var(--duration-normal) var(--ease-in);
        will-change: opacity, transform;
    }

    .page-slide-down-enter-from {
        opacity: 0;
        transform: translateY(-16px);
    }

    .page-slide-down-leave-to {
        opacity: 0;
        transform: translateY(8px);
    }

    /* 4. page-cross-fade: 不同组的同级切换（平台间跳转） - 微缩放交叉淡入 */
    .page-cross-fade-enter-active {
        transition: opacity var(--duration-slow) var(--ease-out),
            transform var(--duration-slow) var(--ease-out);
        will-change: opacity, transform;
    }

    .page-cross-fade-leave-active {
        transition: opacity var(--duration-normal) var(--ease-in),
            transform var(--duration-normal) var(--ease-in);
        will-change: opacity, transform;
    }

    .page-cross-fade-enter-from {
        opacity: 0;
        transform: scale(0.97);
    }

    .page-cross-fade-leave-to {
        opacity: 0;
        transform: scale(1.02);
    }

    /* 5. page-slide-lateral: 同组内同级切换（如 codex/mcp → codex/profiles） - 水平滑动 */
    .page-slide-lateral-enter-active {
        transition: opacity var(--duration-slow) var(--ease-out),
            transform var(--duration-slow) var(--ease-out);
        will-change: opacity, transform;
    }

    .page-slide-lateral-leave-active {
        transition: opacity var(--duration-normal) var(--ease-in),
            transform var(--duration-normal) var(--ease-in);
        will-change: opacity, transform;
    }

    .page-slide-lateral-enter-from {
        opacity: 0;
        transform: translateX(20px);
    }

    .page-slide-lateral-leave-to {
        opacity: 0;
        transform: translateX(-20px);
    }
}
