# CCR UI æ¨¡å—æŒ‡å¯¼æ–‡ä»¶

[æ ¹ç›®å½•](../CLAUDE.md) > **ccr-ui**

---

## é¡¹ç›®æ¶æ„

### æ¨¡å—èŒè´£

CCR UI æ˜¯ä¸€ä¸ªå®Œæ•´çš„å…¨æ ˆ Web åº”ç”¨ï¼Œä¸ºå¤šä¸ª AI CLI å·¥å…·æä¾›å¯è§†åŒ–ç®¡ç†ç•Œé¢ã€‚

**æ ¸å¿ƒç»„æˆ**:
1. **Backend** (`backend/`) - Axum REST API æœåŠ¡å™¨ (129 ç«¯ç‚¹, Rust)
2. **Frontend** (`frontend/`) - Vue.js 3 å•é¡µåº”ç”¨ (Liquid Glass è®¾è®¡)

**æ”¯æŒå¹³å°**:
- **Claude Code** - MCP æœåŠ¡å™¨ã€Agentsã€æ–œæ å‘½ä»¤ã€æ’ä»¶
- **Codex** - é…ç½®æ–‡ä»¶ã€MCPã€Agentsã€æ–œæ å‘½ä»¤ã€æ’ä»¶
- **Gemini CLI** - é…ç½®ã€MCPã€Agentsã€æ–œæ å‘½ä»¤ã€æ’ä»¶
- **Qwen** - é…ç½®ã€MCPã€Agentsã€æ–œæ å‘½ä»¤ã€æ’ä»¶
- **iFlow** - åŸºç¡€æ”¯æŒ (stub å®ç°)

### æ¶æ„æ€»è§ˆ

```
ccr-ui/
â”œâ”€â”€ backend/                    # Rust åç«¯ (Axum + Tokio)
â”‚   â”œâ”€â”€ API Layer               - 141 REST ç«¯ç‚¹
â”‚   â”œâ”€â”€ Services Layer          - ä¸šåŠ¡é€»è¾‘ç¼–æ’
â”‚   â”œâ”€â”€ Managers Layer          - æ•°æ®è®¿é—®ä¸æ–‡ä»¶ I/O
â”‚   â”œâ”€â”€ Models Layer            - æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ Core Layer              - é”™è¯¯å¤„ç†ã€å‘½ä»¤æ‰§è¡Œ
â”‚   â””â”€â”€ Utils Layer             - å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ frontend/                   # Vue.js 3 å‰ç«¯ (SPA)
â”‚   â”œâ”€â”€ Views                   - 40+ é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Components              - 15+ å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Router                  - Vue Router è·¯ç”±
â”‚   â”œâ”€â”€ Store                   - Pinia çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ API Client              - Axios HTTP å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ docs/                       # VitePress æ–‡æ¡£ç«™ç‚¹
â””â”€â”€ justfile                    # å¼€å‘ä»»åŠ¡è‡ªåŠ¨åŒ–
```

**è®¾è®¡å“²å­¦**:
- **å‰åç«¯åˆ†ç¦»**: å®Œå…¨è§£è€¦ï¼Œç‹¬ç«‹éƒ¨ç½²
- **RESTful API**: æ ‡å‡† HTTP + JSON é€šä¿¡
- **åŸå­æ“ä½œ**: åç«¯æ‰€æœ‰æ–‡ä»¶å†™å…¥ä½¿ç”¨åŸå­æ“ä½œ
- **ç±»å‹å®‰å…¨**: åç«¯ Rust + å‰ç«¯ TypeScript
- **ç°ä»£åŒ– UI**: Liquid Glass è®¾è®¡é£æ ¼

---

## é¡¹ç›®æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ (Rust)

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ¡†æ¶** | Axum | 0.7+ | Web æ¡†æ¶ |
| **è¿è¡Œæ—¶** | Tokio | 1.42+ | å¼‚æ­¥è¿è¡Œæ—¶ |
| **åºåˆ—åŒ–** | Serde | 1.0+ | JSON/TOML/YAML |
| **æ—¥å¿—** | Tracing | 0.1+ | ç»“æ„åŒ–æ—¥å¿— |
| **é”™è¯¯** | Anyhow + Thiserror | 1.0+ / 2.0+ | é”™è¯¯å¤„ç† |

### å‰ç«¯æŠ€æœ¯æ ˆ (TypeScript/Vue)

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ¡†æ¶** | Vue.js | 3.5.22 | UI æ¡†æ¶ |
| **æ„å»º** | Vite | 7.1.11 | æ„å»ºå·¥å…· |
| **è·¯ç”±** | Vue Router | 4.4 | è·¯ç”±ç®¡ç† |
| **çŠ¶æ€** | Pinia | 2.2.6 | çŠ¶æ€ç®¡ç† |
| **æ ·å¼** | Tailwind CSS | 3.4.17 | CSS æ¡†æ¶ |
| **HTTP** | Axios | 1.7.9 | API å®¢æˆ·ç«¯ |
| **ç±»å‹** | TypeScript | 5.7.3 | ç±»å‹å®‰å…¨ |

---

## é¡¹ç›®æ¨¡å—åˆ’åˆ†

### ç›®å½•ç»“æ„

```
ccr-ui/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs                      # åç«¯å…¥å£
â”‚   â”‚   â”œâ”€â”€ api/handlers/                # API å¤„ç†å™¨ (16+ æ–‡ä»¶)
â”‚   â”‚   â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ managers/                    # ç®¡ç†å±‚
â”‚   â”‚   â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ core/                        # æ ¸å¿ƒå±‚
â”‚   â”‚   â””â”€â”€ utils/                       # å·¥å…·å±‚
â”‚   â”œâ”€â”€ Cargo.toml                       # Rust ä¾èµ–
â”‚   â””â”€â”€ logs/                            # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts                      # å‰ç«¯å…¥å£
â”‚   â”‚   â”œâ”€â”€ views/                       # é¡µé¢ç»„ä»¶ (40+)
â”‚   â”‚   â”œâ”€â”€ components/                  # å¯å¤ç”¨ç»„ä»¶ (15+)
â”‚   â”‚   â”œâ”€â”€ router/                      # Vue Router
â”‚   â”‚   â”œâ”€â”€ store/                       # Pinia Store
â”‚   â”‚   â”œâ”€â”€ api/                         # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ types/                       # TypeScript ç±»å‹
â”‚   â”‚   â””â”€â”€ styles/                      # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ package.json                     # NPM ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.ts                   # Vite é…ç½®
â”‚   â””â”€â”€ dist/                            # æ„å»ºè¾“å‡º
â”‚
â”œâ”€â”€ docs/                                # VitePress æ–‡æ¡£
â”œâ”€â”€ justfile                             # Just ä»»åŠ¡å®šä¹‰
â”œâ”€â”€ README.md                            # é¡¹ç›®è¯´æ˜
â””â”€â”€ CLAUDE.md                            # æœ¬æ–‡ä»¶
```

### æ ¸å¿ƒå…¥å£ç‚¹

| æ¨¡å— | å…¥å£æ–‡ä»¶ | é»˜è®¤ç«¯å£ | èŒè´£ |
|------|----------|----------|------|
| **åç«¯** | `backend/src/main.rs` | 8081 | REST API æœåŠ¡å™¨ |
| **å‰ç«¯** | `frontend/src/main.ts` | 3000 (dev) | Vue.js SPA |

---

## é¡¹ç›®ä¸šåŠ¡æ¨¡å—

### 1. CCR é…ç½®ç®¡ç†

**åŠŸèƒ½**:
- åˆ—å‡º/åˆ‡æ¢/åˆ›å»º/æ›´æ–°/åˆ é™¤é…ç½®
- å¯¼å…¥/å¯¼å‡ºé…ç½®
- éªŒè¯é…ç½®
- æŸ¥çœ‹æ“ä½œå†å²

**æ¶‰åŠç»„ä»¶**:
- å‰ç«¯: `ConfigsView.vue`
- åç«¯: `handlers/config.rs`

### 2. å¹³å°ç®¡ç†

#### Claude Code
- **MCP æœåŠ¡å™¨**: ç®¡ç† MCP æœåŠ¡å™¨é…ç½®
- **Agents**: AI Agent é…ç½®
- **æ–œæ å‘½ä»¤**: è‡ªå®šä¹‰å‘½ä»¤
- **æ’ä»¶**: æ’ä»¶ç®¡ç†

#### Codex
- **é…ç½®æ–‡ä»¶**: Profile ç®¡ç†
- **MCP/Agents/æ–œæ å‘½ä»¤/æ’ä»¶**: åŒ Claude

#### Gemini CLI / Qwen / iFlow
- ç±»ä¼¼ç»“æ„ï¼Œå¹³å°ç‰¹å®šåŠŸèƒ½

### 3. WebDAV åŒæ­¥

**åŠŸèƒ½**:
- WebDAV é…ç½®
- å¤šæ–‡ä»¶å¤¹ç®¡ç†
- æ¨é€/æ‹‰å–æ“ä½œ
- åŒæ­¥çŠ¶æ€æ˜¾ç¤º

**æ¶‰åŠç»„ä»¶**:
- å‰ç«¯: `SyncView.vue`
- åç«¯: `handlers/sync.rs`

### 4. é…ç½®è½¬æ¢

**åŠŸèƒ½**:
- Claude â†” Codex è½¬æ¢
- Claude â†” Gemini è½¬æ¢
- æ ¼å¼éªŒè¯

**æ¶‰åŠç»„ä»¶**:
- å‰ç«¯: `ConverterView.vue`
- åç«¯: `handlers/converter.rs`

---

## é¡¹ç›®ä»£ç é£æ ¼ä¸è§„èŒƒ

### åç«¯ä»£ç è§„èŒƒ (Rust)

- **å‘½å**: `snake_case` å‡½æ•°/å˜é‡, `PascalCase` ç±»å‹
- **æ ¼å¼åŒ–**: ä½¿ç”¨ `cargo fmt`
- **æ£€æŸ¥**: é€šè¿‡ `cargo clippy` æ— è­¦å‘Š
- **é”™è¯¯å¤„ç†**: ä½¿ç”¨ `Result` ä¸è‡ªå®šä¹‰é”™è¯¯ç±»å‹
- **æ—¥å¿—**: ä½¿ç”¨ `tracing` ç»“æ„åŒ–æ—¥å¿—
- **æ–‡æ¡£**: `///` æ³¨é‡Šå…¬å¼€ API

è¯¦è§: [backend/CLAUDE.md](backend/CLAUDE.md)

### å‰ç«¯ä»£ç è§„èŒƒ (TypeScript/Vue)

- **å‘½å**: `camelCase` å˜é‡/å‡½æ•°, `PascalCase` ç»„ä»¶/ç±»å‹
- **æ ¼å¼åŒ–**: ESLint + Prettier
- **ç»„ä»¶**: `<script setup>` Composition API
- **æ ·å¼**: Tailwind CSS ä¼˜å…ˆï¼Œå‡å°‘è‡ªå®šä¹‰ CSS
- **ç±»å‹**: TypeScript ä¸¥æ ¼æ¨¡å¼
- **çŠ¶æ€**: Pinia Store é›†ä¸­ç®¡ç†

è¯¦è§: [frontend/CLAUDE.md](frontend/CLAUDE.md)

---

## æµ‹è¯•ä¸è´¨é‡

### åç«¯æµ‹è¯•

```bash
cd backend
cargo test              # è¿è¡Œæµ‹è¯•
cargo clippy            # ä»£ç æ£€æŸ¥
cargo fmt --check       # æ ¼å¼æ£€æŸ¥
```

**è´¨é‡ç›®æ ‡**:
- âœ… é›¶ç¼–è¯‘é”™è¯¯
- âœ… é›¶ Clippy è­¦å‘Š
- ğŸš§ å•å…ƒæµ‹è¯•è¦†ç›–ç‡ 80%+

### å‰ç«¯æµ‹è¯•

```bash
cd frontend
npm run type-check      # TypeScript æ£€æŸ¥
npm run lint            # ESLint æ£€æŸ¥
npm run build           # æ„å»ºéªŒè¯
```

**è´¨é‡ç›®æ ‡**:
- âœ… é›¶ TypeScript é”™è¯¯
- âœ… é›¶ ESLint è­¦å‘Š
- âœ… æˆåŠŸæ„å»º
- ğŸš§ å•å…ƒæµ‹è¯•è¦†ç›–ç‡ 80%+

---

## é¡¹ç›®æ„å»ºã€æµ‹è¯•ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- **Rust**: 1.88+ (Edition 2024)
- **Node.js**: 18.x+
- **Cargo**: æœ€æ–°ç¨³å®šç‰ˆ
- **npm/yarn/pnpm**: 9.x+

### å¿«é€Ÿå¯åŠ¨

#### æ–¹å¼ä¸€: ä½¿ç”¨ Just (æ¨è)

```bash
cd ccr-ui

# å®‰è£…ä¾èµ–
just i

# å¯åŠ¨å¼€å‘ç¯å¢ƒ (åç«¯ + å‰ç«¯)
just s

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
just b

# è¿è¡Œæµ‹è¯•
just t

# ä»£ç æ£€æŸ¥
just c
```

#### æ–¹å¼äºŒ: æ‰‹åŠ¨å¯åŠ¨

**åç«¯**:
```bash
cd backend
cargo run                # å¯åŠ¨åç«¯ (127.0.0.1:8081)
```

**å‰ç«¯**:
```bash
cd frontend
npm install              # å®‰è£…ä¾èµ–
npm run dev              # å¯åŠ¨å‰ç«¯ (localhost:3000)
```

### ç”Ÿäº§æ„å»º

```bash
# åç«¯æ„å»º
cd backend
cargo build --release
# è¾“å‡º: target/release/ccr-ui-backend

# å‰ç«¯æ„å»º
cd frontend
npm run build
# è¾“å‡º: dist/

# è¿è¡Œç”Ÿäº§ç‰ˆæœ¬
./backend/target/release/ccr-ui-backend --port 8081
# å‰ç«¯éƒ¨ç½² dist/ åˆ°é™æ€æœåŠ¡å™¨ (Nginx/Vercel/Netlify)
```

### Just å‘½ä»¤å‚è€ƒ

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `just i` | å®‰è£…æ‰€æœ‰ä¾èµ– (åç«¯ + å‰ç«¯) |
| `just s` | å¯åŠ¨å¼€å‘ç¯å¢ƒ (åç«¯ + å‰ç«¯å¹¶è¡Œ) |
| `just b` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `just c` | ä»£ç æ£€æŸ¥ (clippy + lint) |
| `just t` | è¿è¡Œæµ‹è¯• |
| `just clean` | æ¸…ç†æ„å»ºäº§ç‰© |
| `just quick-start` | é¦–æ¬¡è®¾ç½® + å¯åŠ¨ |

---

## Git å·¥ä½œæµç¨‹

### åˆ†æ”¯ç­–ç•¥

- **main**: ç”Ÿäº§ç¯å¢ƒä»£ç 
- **dev**: å¼€å‘ç¯å¢ƒä»£ç 
- **feature/***: åŠŸèƒ½å¼€å‘
- **bugfix/***: Bug ä¿®å¤

### æäº¤è§„èŒƒ

éµå¾ª Conventional Commits:

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat(UI): æ·»åŠ é¢„ç®—ç®¡ç†ç•Œé¢"
git commit -m "feat(åç«¯): å®ç°é¢„ç®— API"

# Bug ä¿®å¤
git commit -m "fix(UI): ä¿®å¤æš—é»‘æ¨¡å¼æ ·å¼é—®é¢˜"
git commit -m "fix(åç«¯): ä¿®å¤é…ç½®è§£æé”™è¯¯"

# æ–‡æ¡£
git commit -m "docs(UI): æ›´æ–°éƒ¨ç½²æŒ‡å—"

# é‡æ„
git commit -m "refactor(åç«¯): é‡æ„ä¸ºåˆ†å±‚æ¶æ„"
```

---

## æ–‡æ¡£ç›®å½•

### æ–‡æ¡£å­˜å‚¨è§„èŒƒ

- **æ¨¡å—æ–‡æ¡£**: `/ccr-ui/CLAUDE.md` (æœ¬æ–‡ä»¶)
- **åç«¯æ–‡æ¡£**: `/ccr-ui/backend/CLAUDE.md`
- **å‰ç«¯æ–‡æ¡£**: `/ccr-ui/frontend/CLAUDE.md`
- **æ ¹æ–‡æ¡£**: `/CLAUDE.md` (é¡¹ç›®æ€»è§ˆ)

---
