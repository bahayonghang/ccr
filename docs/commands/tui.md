# TUI - äº¤äº’å¼ç»ˆç«¯ç•Œé¢

å¯åŠ¨ CCR çš„äº¤äº’å¼ç»ˆç«¯ç”¨æˆ·ç•Œé¢ï¼ˆTUIï¼‰ï¼Œæä¾›å¯è§†åŒ–é…ç½®ç®¡ç†åŠŸèƒ½ã€‚

## åŸºæœ¬ç”¨æ³•

```bash
ccr tui [OPTIONS]
```

## é€‰é¡¹

| é€‰é¡¹ | ç®€å†™ | è¯´æ˜ |
|------|------|------|
| `--yolo` | - | å¯åŠ¨æ—¶å¯ç”¨ YOLO æ¨¡å¼ï¼Œè·³è¿‡æ‰€æœ‰ç¡®è®¤æç¤º |

## åŠŸèƒ½æ¦‚è¿°

TUI æä¾›äº†ä¸‰ä¸ªåŠŸèƒ½é½å…¨çš„æ ‡ç­¾é¡µï¼Œç”¨äºç®¡ç† Claude Code é…ç½®ï¼š

### ğŸ–¥ï¸ ä¸‰ä¸ªæ ‡ç­¾é¡µ

#### 1. é…ç½®é¡µï¼ˆConfigs Tabï¼‰

é…ç½®ç®¡ç†çš„æ ¸å¿ƒç•Œé¢ï¼š

**åŠŸèƒ½ï¼š**
- ğŸ“‹ æµè§ˆæ‰€æœ‰å¯ç”¨é…ç½®
- â–¶ï¸ åˆ‡æ¢åˆ°é€‰ä¸­çš„é…ç½®
- ğŸ—‘ï¸ åˆ é™¤é…ç½®ï¼ˆéœ€ YOLO æ¨¡å¼ï¼‰
- ğŸ¨ å½©è‰²ç¼–ç æ ‡è¯†ï¼š
  - **ç»¿è‰² + â–¶ æ ‡è®°**ï¼šå½“å‰ä½¿ç”¨çš„é…ç½®
  - **é’è‰² + â­ æ ‡è®°**ï¼šé»˜è®¤é…ç½®
  - **ç™½è‰²**ï¼šå…¶ä»–é…ç½®

**æ“ä½œï¼š**
- ä½¿ç”¨ `â†‘â†“` æˆ– `j`/`k` å¯¼èˆªåˆ—è¡¨
- æŒ‰ `Enter` åˆ‡æ¢åˆ°é€‰ä¸­çš„é…ç½®
- æŒ‰ `d` åˆ é™¤é€‰ä¸­çš„é…ç½®ï¼ˆéœ€è¦ YOLO æ¨¡å¼ï¼‰

**æ˜¾ç¤ºä¿¡æ¯ï¼š**
- é…ç½®åç§°
- é…ç½®æè¿°
- å½“å‰/é»˜è®¤çŠ¶æ€æ ‡è®°

#### 2. å†å²é¡µï¼ˆHistory Tabï¼‰

æŸ¥çœ‹æ“ä½œå®¡è®¡è®°å½•ï¼š

**åŠŸèƒ½ï¼š**
- ğŸ“œ æ˜¾ç¤ºæœ€è¿‘ 50 æ¡æ“ä½œå†å²
- â±ï¸ æ—¶é—´æˆ³ä¿¡æ¯ï¼ˆæœˆ-æ—¥ æ—¶:åˆ†:ç§’ï¼‰
- ğŸ¯ æ“ä½œç±»å‹ï¼ˆswitch/backup/validate ç­‰ï¼‰
- ğŸ“Š ç»“æœæŒ‡ç¤ºå™¨ï¼š
  - âœ… **ç»¿è‰²**ï¼šæ“ä½œæˆåŠŸ
  - âŒ **çº¢è‰²**ï¼šæ“ä½œå¤±è´¥
  - âš ï¸ **é»„è‰²**ï¼šè­¦å‘Š

**æ˜¾ç¤ºæ ¼å¼ï¼š**
```
10-17 14:32:15 âœ… switch â†’ anthropic
10-17 14:30:45 âœ… backup â†’ N/A
10-17 14:25:10 âš ï¸ validate â†’ N/A
```

#### 3. ç³»ç»Ÿé¡µï¼ˆSystem Tabï¼‰

æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯å’Œé…ç½®ï¼š

**ç³»ç»Ÿä¿¡æ¯ï¼š**
- ğŸ–¥ï¸ ä¸»æœºå
- ğŸ‘¤ ç”¨æˆ·å
- ğŸ’» æ“ä½œç³»ç»Ÿ

**CCR ä¿¡æ¯ï¼š**
- ğŸ“¦ ç‰ˆæœ¬å·
- â–¶ï¸ å½“å‰é…ç½®
- âš¡ YOLO æ¨¡å¼çŠ¶æ€

**æ–‡ä»¶è·¯å¾„ï¼š**
- âš™ï¸ é…ç½®æ–‡ä»¶ï¼š`~/.ccs_config.toml`
- ğŸ¯ è®¾ç½®æ–‡ä»¶ï¼š`~/.claude/settings.json`
- ğŸ“š å†å²æ–‡ä»¶ï¼š`~/.claude/ccr_history.json`

### âŒ¨ï¸ é”®ç›˜å¿«æ·é”®

#### æ ‡ç­¾é¡µåˆ‡æ¢
- `1`ï¼šè·³è½¬åˆ°é…ç½®é¡µ
- `2`ï¼šè·³è½¬åˆ°å†å²é¡µ
- `3`ï¼šè·³è½¬åˆ°ç³»ç»Ÿé¡µ
- `Tab`ï¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ
- `Shift+Tab`ï¼šåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ

#### åˆ—è¡¨å¯¼èˆª
- `â†‘` / `k`ï¼šå‘ä¸Šç§»åŠ¨
- `â†“` / `j`ï¼šå‘ä¸‹ç§»åŠ¨ï¼ˆæ”¯æŒ Vim é£æ ¼ï¼‰

#### æ“ä½œå¿«æ·é”®
- `Enter`ï¼šæ‰§è¡Œæ“ä½œï¼ˆåˆ‡æ¢é…ç½®ï¼‰
- `d` / `D`ï¼šåˆ é™¤é€‰ä¸­çš„é…ç½®ï¼ˆéœ€ YOLO æ¨¡å¼ï¼‰
- `y` / `Y`ï¼šåˆ‡æ¢ YOLO æ¨¡å¼
- `q` / `Q`ï¼šé€€å‡º TUI
- `Ctrl+C`ï¼šå¼ºåˆ¶é€€å‡º

### âš¡ YOLO æ¨¡å¼

YOLO (You Only Live Once) æ¨¡å¼ç”¨äºè·³è¿‡ç¡®è®¤æç¤ºï¼Œæé«˜æ“ä½œæ•ˆç‡ã€‚

**ç‰¹æ€§ï¼š**
- ğŸš¨ è·³è¿‡æ‰€æœ‰å±é™©æ“ä½œçš„ç¡®è®¤æç¤º
- ğŸ—‘ï¸ TUI ä¸­åˆ é™¤é…ç½®æ“ä½œå¿…é¡»å¯ç”¨æ­¤æ¨¡å¼
- ğŸ”„ è¿è¡Œæ—¶å¯éšæ—¶åˆ‡æ¢ï¼ˆæŒ‰ `Y` é”®ï¼‰
- ğŸ“Š é¡µè„šå®æ—¶æ˜¾ç¤ºçŠ¶æ€ï¼š
  - ğŸ”´ **YOLO** (çº¢è‰²) - å·²å¯ç”¨
  - ğŸŸ¢ **SAFE** (ç»¿è‰²) - å·²ç¦ç”¨

**å¯ç”¨æ–¹å¼ï¼š**

1. **å¯åŠ¨æ—¶å¯ç”¨ï¼š**
```bash
ccr tui --yolo
```

2. **è¿è¡Œæ—¶åˆ‡æ¢ï¼š**
```
æŒ‰ Y é”® â†’ åˆ‡æ¢ YOLO æ¨¡å¼çŠ¶æ€
```

::: warning å±é™©æ“ä½œè­¦å‘Š
YOLO æ¨¡å¼ä¼šè·³è¿‡æ‰€æœ‰ç¡®è®¤ï¼Œä½¿ç”¨æ—¶è¯·åŠ¡å¿…å°å¿ƒï¼ç‰¹åˆ«æ˜¯åœ¨åˆ é™¤é…ç½®æ—¶ã€‚
:::

### ğŸ¨ è§†è§‰ç‰¹æ€§

**å½©è‰²ç¼–ç ï¼š**
- **ç»¿è‰²**ï¼šæˆåŠŸçŠ¶æ€ã€å½“å‰é…ç½®
- **é’è‰²**ï¼šé»˜è®¤é…ç½®
- **çº¢è‰²**ï¼šé”™è¯¯æ¶ˆæ¯ã€YOLO æ¨¡å¼å¯ç”¨
- **é»„è‰²**ï¼šè­¦å‘Šæ¶ˆæ¯ã€é«˜äº®é€‰ä¸­é¡¹
- **ç™½è‰²**ï¼šæ™®é€šé…ç½®å’Œæ–‡æœ¬

**å®æ—¶åé¦ˆï¼š**
- âœ… æ“ä½œæˆåŠŸï¼šç»¿è‰²åŠ ç²—æ¶ˆæ¯
- âŒ æ“ä½œå¤±è´¥ï¼šçº¢è‰²åŠ ç²—æ¶ˆæ¯
- ğŸ’¡ çŠ¶æ€æç¤ºï¼šå®æ—¶æ˜¾ç¤ºåœ¨é¡µè„šä¸Šæ–¹

**æ ‡è®°ç¬¦å·ï¼š**
- â–¶ å½“å‰é…ç½®
- â­ é»˜è®¤é…ç½®
- âœ… æˆåŠŸæ“ä½œ
- âŒ å¤±è´¥æ“ä½œ
- âš ï¸ è­¦å‘Šä¿¡æ¯
- ğŸ”´ YOLO æ¨¡å¼å¯ç”¨
- ğŸŸ¢ å®‰å…¨æ¨¡å¼

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæ—¥å¸¸é…ç½®åˆ‡æ¢

```bash
# å¯åŠ¨ TUI
ccr tui

# åœ¨ TUI ä¸­ï¼š
1. æŒ‰ '1' è¿›å…¥é…ç½®é¡µ
2. ä½¿ç”¨ â†‘â†“ æˆ– j/k æµè§ˆé…ç½®åˆ—è¡¨
3. é€‰ä¸­éœ€è¦çš„é…ç½®åæŒ‰ Enter
4. æŸ¥çœ‹é¡µè„šçš„æˆåŠŸæ¶ˆæ¯
5. æŒ‰ 'q' é€€å‡º
```

### ç¤ºä¾‹ 2ï¼šæŸ¥çœ‹æ“ä½œå†å²

```bash
# å¯åŠ¨ TUI
ccr tui

# åœ¨ TUI ä¸­ï¼š
1. æŒ‰ '2' è¿›å…¥å†å²é¡µ
2. ä½¿ç”¨ â†‘â†“ æˆ– j/k æµè§ˆå†å²è®°å½•
3. æŸ¥çœ‹æ“ä½œç»“æœï¼ˆâœ… âŒ âš ï¸ï¼‰
4. æŒ‰ 'q' é€€å‡º
```

### ç¤ºä¾‹ 3ï¼šåˆ é™¤é…ç½®ï¼ˆYOLO æ¨¡å¼ï¼‰

```bash
# æ–¹å¼ 1ï¼šå¯åŠ¨æ—¶å¯ç”¨ YOLO æ¨¡å¼
ccr tui --yolo

# åœ¨ TUI ä¸­ï¼š
1. æŒ‰ '1' è¿›å…¥é…ç½®é¡µ
2. é€‰æ‹©è¦åˆ é™¤çš„é…ç½®
3. æŒ‰ 'd' åˆ é™¤
4. æŸ¥çœ‹é¡µè„šçš„ç¡®è®¤æ¶ˆæ¯

# æ–¹å¼ 2ï¼šè¿è¡Œæ—¶å¯ç”¨ YOLO æ¨¡å¼
ccr tui

# åœ¨ TUI ä¸­ï¼š
1. æŒ‰ 'Y' å¯ç”¨ YOLO æ¨¡å¼
2. é¡µè„šæ˜¾ç¤º ğŸ”´ YOLO çŠ¶æ€
3. æŒ‰ '1' è¿›å…¥é…ç½®é¡µ
4. é€‰æ‹©è¦åˆ é™¤çš„é…ç½®
5. æŒ‰ 'd' åˆ é™¤
```

### ç¤ºä¾‹ 4ï¼šæŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯

```bash
# å¯åŠ¨ TUI
ccr tui

# åœ¨ TUI ä¸­ï¼š
1. æŒ‰ '3' è¿›å…¥ç³»ç»Ÿé¡µ
2. æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ï¼ˆä¸»æœºåã€ç”¨æˆ·ã€OSï¼‰
3. æŸ¥çœ‹ CCR ä¿¡æ¯ï¼ˆç‰ˆæœ¬ã€å½“å‰é…ç½®ï¼‰
4. æŸ¥çœ‹æ–‡ä»¶è·¯å¾„
5. æŒ‰ 'q' é€€å‡º
```

## å·¥ä½œæµå»ºè®®

### å¿«é€Ÿåˆ‡æ¢é…ç½®

```bash
ccr tui
# 1 â†’ â†“â†“ â†’ Enter â†’ q
# ä»…éœ€ 4 æ­¥å®Œæˆé…ç½®åˆ‡æ¢
```

### æ£€æŸ¥é…ç½®å’Œå†å²

```bash
ccr tui
# 1 â†’ æŸ¥çœ‹é…ç½®åˆ—è¡¨
# 2 â†’ æŸ¥çœ‹æ“ä½œå†å²
# 3 â†’ æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
# q â†’ é€€å‡º
```

### æ‰¹é‡ç®¡ç†é…ç½®

```bash
ccr tui --yolo
# Y â†’ å¯ç”¨ YOLO æ¨¡å¼
# 1 â†’ è¿›å…¥é…ç½®é¡µ
# â†“ â†’ d â†’ åˆ é™¤é…ç½® 1
# â†“ â†’ d â†’ åˆ é™¤é…ç½® 2
# Y â†’ ç¦ç”¨ YOLO æ¨¡å¼
# q â†’ é€€å‡º
```

## æ“ä½œå®‰å…¨

### å½“å‰é…ç½®ä¿æŠ¤

TUI ä¸å…è®¸åˆ é™¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„é…ç½®ï¼š

```
çŠ¶æ€æ¶ˆæ¯ï¼šâŒ Cannot delete current config: anthropic
```

### é»˜è®¤é…ç½®ä¿æŠ¤

TUI ä¸å…è®¸åˆ é™¤é»˜è®¤é…ç½®ï¼š

```
çŠ¶æ€æ¶ˆæ¯ï¼šâŒ Cannot delete default config: anthropic
```

### YOLO æ¨¡å¼è¦æ±‚

åˆ é™¤æ“ä½œå¿…é¡»å¯ç”¨ YOLO æ¨¡å¼ï¼š

```
çŠ¶æ€æ¶ˆæ¯ï¼šâš ï¸ YOLO mode required to delete configs in TUI (Press Y)
```

## æ€§èƒ½ç‰¹ç‚¹

- **å“åº”é€Ÿåº¦**ï¼š250ms äº‹ä»¶è½®è¯¢å‘¨æœŸï¼Œç¡®ä¿æµç•…äº¤äº’
- **èµ„æºå ç”¨**ï¼šè½»é‡çº§ç»ˆç«¯ç•Œé¢ï¼ŒCPU å’Œå†…å­˜å ç”¨æä½
- **å¹¶å‘å®‰å…¨**ï¼šç»§æ‰¿ CCR æ ¸å¿ƒçš„æ–‡ä»¶é”æœºåˆ¶
- **æ•°æ®å®æ—¶æ€§**ï¼šæ¯æ¬¡æ¸²æŸ“è¯»å–æœ€æ–°é…ç½®å’Œå†å²æ•°æ®

## æ•…éšœæ’é™¤

### ç»ˆç«¯æ˜¾ç¤ºå¼‚å¸¸

**é—®é¢˜ï¼š** TUI ç•Œé¢æ˜¾ç¤ºæ··ä¹±æˆ–é¢œè‰²é”™è¯¯

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥ç»ˆç«¯æ”¯æŒ
echo $TERM

# ä½¿ç”¨æ”¯æŒçš„ç»ˆç«¯ï¼ˆæ¨èï¼‰
# - Linux: GNOME Terminal, Konsole, Alacritty
# - macOS: iTerm2, Terminal.app
# - Windows: Windows Terminal, ConEmu

# å¦‚æœé—®é¢˜æŒç»­ï¼Œå°è¯•ï¼š
export TERM=xterm-256color
ccr tui
```

### é”®ç›˜å¿«æ·é”®ä¸å·¥ä½œ

**é—®é¢˜ï¼š** æŒ‰é”®æ²¡æœ‰å“åº”æˆ–å“åº”é”™è¯¯

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥ç»ˆç«¯æ¨¡å¼
stty -a

# é‡ç½®ç»ˆç«¯çŠ¶æ€
reset
ccr tui
```

### TUI æ— æ³•å¯åŠ¨

**é—®é¢˜ï¼š** å¯åŠ¨å¤±è´¥æˆ–å´©æºƒ

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
ccr validate

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
CCR_LOG_LEVEL=debug ccr tui

# å¦‚æœé…ç½®æ–‡ä»¶æŸåï¼Œé‡æ–°åˆå§‹åŒ–
mv ~/.ccs_config.toml ~/.ccs_config.toml.backup
ccr init
```

### é€€å‡ºåç»ˆç«¯æ··ä¹±

**é—®é¢˜ï¼š** é€€å‡º TUI åç»ˆç«¯æ˜¾ç¤ºå¼‚å¸¸

**è§£å†³ï¼š**
```bash
# é‡ç½®ç»ˆç«¯
reset

# æˆ–æ¸…ç©ºå±å¹•
clear
```

## TUI vs CLI vs Web

é€‰æ‹©åˆé€‚çš„ç•Œé¢ï¼š

| ä½¿ç”¨åœºæ™¯ | æ¨èç•Œé¢ | åŸå›  |
|----------|----------|------|
| æ—¥å¸¸äº¤äº’ç®¡ç† | **TUI** | å¯è§†åŒ–ã€é”®ç›˜å¯¼èˆªã€å®æ—¶åé¦ˆ |
| è„šæœ¬å’Œè‡ªåŠ¨åŒ– | **CLI** | å‘½ä»¤è¡Œå‹å¥½ã€æ˜“äºé›†æˆ |
| è¿œç¨‹ç®¡ç† | **Web** | HTTP APIã€è·¨å¹³å°è®¿é—® |
| æ‰¹é‡æ“ä½œ | **CLI** | é…åˆ shell è„šæœ¬æ•ˆç‡é«˜ |
| å­¦ä¹ å’Œæ¢ç´¢ | **TUI** | ç›´è§‚ã€äº¤äº’å¼ã€æœ‰æç¤º |

## æŠ€æœ¯ç»†èŠ‚

### æ¶æ„

TUI åŸºäºä»¥ä¸‹æŠ€æœ¯æ ˆï¼š

- **ratatui 0.29**: ç°ä»£ Rust TUI æ¡†æ¶
- **crossterm 0.28**: è·¨å¹³å°ç»ˆç«¯æ“ä½œåº“
- **äº‹ä»¶é©±åŠ¨**: 250ms tick äº‹ä»¶å¾ªç¯
- **çŠ¶æ€æœºæ¨¡å¼**: TabState æšä¸¾ç®¡ç†å¯¼èˆª
- **æœåŠ¡å±‚é›†æˆ**: å¤ç”¨ ConfigService/HistoryService/SettingsService

### äº‹ä»¶å¾ªç¯

```rust
loop {
    // æ¸²æŸ“ UI
    terminal.draw(|f| ui::draw(f, &mut app))?;

    // å¤„ç†äº‹ä»¶
    match event_handler.next()? {
        Event::Key(key) => {
            if app.handle_key(key)? {
                break; // é€€å‡º
            }
        }
        Event::Tick => {
            // å®šæ—¶åˆ·æ–°
        }
    }
}
```

### çŠ¶æ€ç®¡ç†

```rust
pub struct App {
    pub current_tab: TabState,           // å½“å‰æ ‡ç­¾é¡µ
    pub yolo_mode: bool,                 // YOLO æ¨¡å¼
    pub config_list_index: usize,        // é…ç½®åˆ—è¡¨ç´¢å¼•
    pub history_list_index: usize,       // å†å²åˆ—è¡¨ç´¢å¼•
    pub status_message: Option<String>,  // çŠ¶æ€æ¶ˆæ¯
    // ... services
}
```

## ç›¸å…³å‘½ä»¤

- [`list`](./list.md) - ä»¥è¡¨æ ¼å½¢å¼åˆ—å‡ºé…ç½®
- [`current`](./current.md) - æ˜¾ç¤ºå½“å‰é…ç½®
- [`switch`](./switch.md) - åˆ‡æ¢é…ç½®
- [`history`](./history.md) - æŸ¥çœ‹æ“ä½œå†å²
- [`web`](./web.md) - å¯åŠ¨ Web ç•Œé¢

## ä¸‹ä¸€æ­¥

- æŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹](/quick-start) äº†è§£åŸºæœ¬ç”¨æ³•
- æŸ¥çœ‹ [é…ç½®ç®¡ç†](/configuration) äº†è§£é…ç½®é€‰é¡¹
- æŸ¥çœ‹ [æ¶æ„æ–‡æ¡£](/architecture) äº†è§£å®ç°ç»†èŠ‚
