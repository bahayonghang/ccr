# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ—ï¸ Cargo Workspace Configuration
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[workspace]
members = [
    ".",              # ccr ä¸» crate (CLI + lib)
    "ccr-ui/backend", # ccr-ui backend server
]
resolver = "2"

# ğŸ“¦ ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ç®¡ç† (workspace.dependencies)
# æˆå‘˜ crate å¯ä»¥é€šè¿‡ { workspace = true } å¼•ç”¨
[workspace.dependencies]
# æ ¸å¿ƒä¾èµ–
clap = { version = "4.5.53", features = ["derive", "cargo"] }
serde = { version = "1.0.228", features = ["derive"] }
serde_json = "1.0.145"
toml = "0.9.8"
anyhow = "1.0.100"
thiserror = "2.0.17"

# å¼‚æ­¥è¿è¡Œæ—¶
tokio = { version = "1.48.0", features = [
    "rt-multi-thread",
    "net",
    "io-util",
    "time",
    "macros",
    "signal",
    "sync",
] }

# Web æ¡†æ¶
axum = { version = "0.8.6", default-features = false, features = [
    "json",
    "tokio",
    "http1",
    "query",
    "form",
] }
tower = { version = "0.5.2", default-features = false }
tower-http = { version = "0.6.6", default-features = false, features = [
    "cors",
] }

# æ—¶é—´å¤„ç†
chrono = { version = "0.4.42", features = ["serde"] }

# å·¥å…·åº“
dirs = "6.0.0"
tempfile = "3.23"
reqwest = { version = "0.12.24", features = ["blocking", "json"] }

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“¦ Package Configuration
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[package]
name = "ccr"
version = "3.6.1"
edition = "2024"
authors = ["Yonghang Li"]
description = "Claude Code Configuration Switcher(Rust implementation)"
license = "MIT"

[lib]
name = "ccr"
path = "src/lib.rs"

[[bin]]
name = "ccr"
path = "src/main.rs"

[dependencies]
# CLI å‚æ•°è§£æ
clap = { workspace = true }

# åºåˆ—åŒ–ä¸é…ç½®è§£æ
serde = { workspace = true }
serde_json = { workspace = true }
toml = { workspace = true }
indexmap = { version = "2.12.1", features = ["serde"] }

# é”™è¯¯å¤„ç†
anyhow = { workspace = true }
thiserror = { workspace = true }

# è·¨å¹³å°ç”¨æˆ·ç›®å½•
dirs = { workspace = true }

# æ–‡ä»¶é”
fs4 = "0.13.1"

# ä¸´æ—¶æ–‡ä»¶ä¸åŸå­å†™å…¥
tempfile = { workspace = true }

# æ–‡ä»¶æ—¶é—´æ“ä½œ
filetime = "0.2"

# æ—¥å¿—è®°å½•
log = "0.4.28"
env_logger = "0.11.8"

# å½©è‰²ç»ˆç«¯è¾“å‡º
colored = "3.0.0"

# TUI æ¡†æ¶ (å¯é€‰åŠŸèƒ½)
ratatui = { version = "0.29", optional = true }
crossterm = { version = "0.29.0", optional = true }

# è¡¨æ ¼å±•ç¤º
comfy-table = "7.2"

# æ—¶é—´æˆ³ä¸æ ¼å¼åŒ–
chrono = { workspace = true }

# å½“å‰æ“ä½œè€…è¯†åˆ«
whoami = "1.6"

# UUIDç”Ÿæˆ
uuid = { version = "1.18.1", features = ["v4", "serde"] }

# HTTP æœåŠ¡å™¨ (ç”¨äº web ç•Œé¢ - å¯é€‰åŠŸèƒ½)
# ğŸ¯ å¼‚æ­¥ Web æ¡†æ¶ - é«˜æ€§èƒ½å¹¶å‘å¤„ç†ï¼ˆä¼˜åŒ–featuresä»¥åŠ å¿«ç¼–è¯‘ï¼‰
tokio = { workspace = true }
axum = { workspace = true, optional = true }
tower = { workspace = true, optional = true }
tower-http = { workspace = true, optional = true }

# è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ (web åŠŸèƒ½)
open = { version = "5.3.3", optional = true }

# ç³»ç»Ÿä¿¡æ¯è·å– (web åŠŸèƒ½)
sysinfo = { version = "0.37.2", optional = true }

# å¹¶è¡Œå¤„ç†
rayon = "1.11"

# WebDAV å®¢æˆ·ç«¯ (ç”¨äºé…ç½®åŒæ­¥)
reqwest_dav = "0.2"

# UI å¯åŠ¨ç›¸å…³ä¾èµ–
reqwest = { workspace = true } # HTTP å®¢æˆ·ç«¯
dialoguer = "0.12.0"           # äº¤äº’å¼æç¤º
flate2 = "1.1.5"               # gzip å‹ç¼©/è§£å‹
blake3 = "1.5.4"               # å†…å®¹æ‘˜è¦ç”¨äºå¢é‡å¤‡ä»½

# ğŸ¯ æ€§èƒ½ä¼˜åŒ–ä¾èµ–
once_cell = "1.21" # æƒ°æ€§é™æ€å˜é‡
smallvec = "1.11"  # å°å‘é‡ä¼˜åŒ–ï¼ˆå‡å°‘å †åˆ†é…ï¼‰

[features]
# é»˜è®¤å¯ç”¨ web å’Œ tui åŠŸèƒ½ï¼Œä¿æŒå‘åå…¼å®¹
default = ["web", "tui"]

# Web API æœåŠ¡å™¨åŠŸèƒ½
# åŒ…å«ï¼šAxum web æ¡†æ¶ã€Tokio å¼‚æ­¥è¿è¡Œæ—¶ã€ç³»ç»Ÿä¿¡æ¯ç¼“å­˜
web = ["dep:axum", "dep:tower", "dep:tower-http", "dep:open", "dep:sysinfo"]

# ç»ˆç«¯ç”¨æˆ·ç•Œé¢åŠŸèƒ½
# åŒ…å«ï¼šRatatui TUI æ¡†æ¶ã€Crossterm ç»ˆç«¯æ§åˆ¶
tui = ["dep:ratatui", "dep:crossterm"]

# ğŸš€ å¼€å‘æ€§èƒ½ä¼˜åŒ–é…ç½®
[profile.dev]
# åŸºæœ¬ä¼˜åŒ–çº§åˆ«ï¼Œåœ¨ç¼–è¯‘é€Ÿåº¦å’Œè¿è¡Œé€Ÿåº¦ä¹‹é—´å–å¾—å¹³è¡¡
opt-level = 1
# å¯ç”¨å¢é‡ç¼–è¯‘ï¼ˆé»˜è®¤å·²å¯ç”¨ï¼Œæ˜¾å¼å£°æ˜ä»¥ä¾¿æ–‡æ¡£åŒ–ï¼‰
incremental = true
# å‡å°‘è°ƒè¯•ä¿¡æ¯ç”Ÿæˆï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦
debug = 1

# ğŸ¯ ä¾èµ–åŒ…åœ¨å¼€å‘æ¨¡å¼ä¸‹ä½¿ç”¨æ›´é«˜ä¼˜åŒ–
# ä¾èµ–åŒ…ä¸ä¼šé¢‘ç¹ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨æ›´é«˜ä¼˜åŒ–çº§åˆ«
[profile.dev.package."*"]
opt-level = 2

# ğŸ§ª æµ‹è¯•æ€§èƒ½ä¼˜åŒ–é…ç½®
[profile.test]
# æµ‹è¯•æ—¶ä½¿ç”¨åŸºæœ¬ä¼˜åŒ–ï¼ŒåŠ å¿«æµ‹è¯•æ‰§è¡Œé€Ÿåº¦
opt-level = 1
# ç»§æ‰¿ dev çš„å¢é‡ç¼–è¯‘è®¾ç½®
inherits = "dev"

# ğŸ† ç”Ÿäº§å‘å¸ƒé…ç½®ï¼ˆæœ€å¤§ä¼˜åŒ–ï¼‰
[profile.release]
opt-level = 3
lto = true
codegen-units = 1
strip = false     # Tauri éœ€è¦ä¿ç•™ç¬¦å·ï¼ˆ__TAURI_BUNDLE_TYPEï¼‰
